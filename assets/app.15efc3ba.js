!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){e.exports={root:"Menu-root-16W-a",column:"Menu-column-3tWGo",columnActive:"Menu-columnActive-2Uy2Z Menu-column-3tWGo",button:"Menu-button-2Matj",menu:"Menu-menu-1-Jjw",item:"Menu-item-2hvvi",list:"Menu-list-_xxDe",option:"Menu-option-306gB",hotKey:"Menu-hotKey-2Ar8m",check:"Menu-check-1lHBd",separator:"Menu-separator-RQEZr"}},function(e,t,n){e.exports={root:"CustomField-root-2OwRM",row:"CustomField-row-BllOa",name:"CustomField-name-1XC-k",value:"CustomField-value-2iCpl",footer:"CustomField-footer-18Fn6",button:"CustomField-button-geyKR"}},function(e,t,n){e.exports={root:"Dialog-root-3i7Hl",table:"Dialog-table-NmR0d",cell:"Dialog-cell-23piZ",dialog:"Dialog-dialog-2uAwv",container:"Dialog-container-3NIcF",header:"Dialog-header-1Jy3A",title:"Dialog-title-2crh1",button:"Dialog-button-12ici",close:"Dialog-close-1OajQ"}},function(e,t,n){e.exports={root:"Digit-root-18MJW",digit:"Digit-digit-mk2mM",t:"Digit-t-3ks06",rt:"Digit-rt-PDYa6",rb:"Digit-rb-2ZC6D",b:"Digit-b-3VLee",lb:"Digit-lb-3mDUV",lt:"Digit-lt-28Ugi",m:"Digit-m-ArDPw"}},function(e,t,n){e.exports={root:"BestTime-root-2ZUb9",table:"BestTime-table-399aW",cell:"BestTime-cell-1JBBq",footer:"BestTime-footer-GIROL",button:"BestTime-button-3YslU"}},function(e,t,n){e.exports={root:"Game-root-2Va_A",scoreboard:"Game-scoreboard-2zl3x",field:"Game-field-ZZOu5",active:"Game-active-34POm",inactive:"Game-inactive-2jAFT"}},function(e,t,n){e.exports={root:"Cell-root-3iUnv",pressed:"Cell-pressed-1qb-_ Cell-root-3iUnv",image:"Cell-image-2S8IL",hurt:"Cell-hurt-3WVjB Cell-image-2S8IL"}},function(e,t,n){e.exports={root:"Winner-root-2fVMQ",text:"Winner-text-2NeHI",input:"Winner-input-3FBe6",button:"Winner-button-3YIjF"}},function(e,t,n){e.exports={root:"Play-root-2rx0x",down:"Play-down-3WpYz",up:"Play-up-r23N7",face:"Play-face-3m33y"}},function(e,t,n){e.exports={root:"Input-root-3Da8p",input:"Input-input-2DqDH"}},function(e,t,n){e.exports={root:"Button-root-3V2xY"}},function(e,t,n){e.exports=n(13)},function(e,t,n){},function(e,t,n){"use strict";function r(e,t){for(var n=[],r=[],a=arguments.length;a-- >2;)n.push(arguments[a]);for(;n.length;){var l=n.pop();if(l&&l.pop)for(a=l.length;a--;)n.push(l[a]);else null!=l&&!0!==l&&!1!==l&&r.push(l)}return"function"==typeof e?e(t||{},r):{nodeName:e,attributes:t||{},children:r,key:t&&t.key}}n.r(t);n(12);var a=n(5),l=n.n(a),o=n(2),i=n.n(o),u=n(10),s=n.n(u),c=function(e,t){var n=e.key,a=e.type,l=e.tabIndex,o=e.onClick,i=e.onCreate;return r("button",{key:n,class:s.a.root,type:a,tabindex:l,onclick:o,oncreate:i},t)},m=function(e){return e.preventDefault(),!1},f=function(e,t){var n=e.key,a=e.title,l=e.onClose,o=e.onKeyDown;return r("section",{key:n,class:i.a.root,tabindex:-1,oncontextmenu:m,ondragstart:m,onkeydown:o},r("div",{class:i.a.table},r("div",{class:i.a.cell},r("div",{class:i.a.dialog},r("div",{class:i.a.container},a&&r("div",{class:i.a.header},r("h1",{class:i.a.title},a),l&&r("div",{class:i.a.button},r(c,{tabIndex:-1,onClick:l},r("svg",{class:i.a.close,width:"13",height:"11"},r("path",{d:"M10.977 2.406l-.883-.883L7 4.616 3.906 1.523l-.883.883L6.116 5.5 3.023 8.594l.883.883L7 6.384l3.094 3.093.883-.883L7.884 5.5l3.093-3.094z"}))))),t)))))},d=n(0),g=n.n(d),v=function(e,t){var n=e.key,a=e.name,l=e.hotKey,o=e.checked,i=e.onClick;return r("li",{key:n,class:g.a.item},r("button",{type:"button",class:g.a.option,tabindex:-1,onclick:i},o&&r("svg",{class:g.a.check,width:"7",height:"7"},r("path",{d:"M0 4.5L2.5 7 7 2.5V0L2.5 4.5 0 2v2.5z"})),a,l&&r("span",{class:g.a.hotKey},l)),t.length>0&&r("div",{class:g.a.menu},r("ul",{class:g.a.list},t)))},p=function(e,t){var n=e.key,a=e.name,l=e.type,o=e.active,i=e.onChange;return r("li",{key:n,class:o&&o[l]?g.a.columnActive:g.a.column},r("button",{type:"button",class:g.a.button,tabindex:-1,"data-name":l,onclick:i,onmouseenter:i},a),t.length>0&&r("div",{class:g.a.menu},r("ul",{class:g.a.list},t)))},h=function(){return r("li",{class:g.a.separator})},b=function(e){var t=e.state,n=e.actions;return r("ul",{class:g.a.root,tabindex:-1,onfocusout:n.toggleMenu},r(p,{name:"Game",type:"game",active:t.menu,onChange:n.toggleMenu},r(v,{name:"New",hotKey:"F2",onClick:function(){return n.reset()}}),r(h,null),r(v,{name:"Beginner",checked:"beginner"===t.game.level,onClick:function(){return n.reset({level:"beginner"})}}),r(v,{name:"Intermediate",checked:"intermediate"===t.game.level,onClick:function(){return n.reset({level:"intermediate"})}}),r(v,{name:"Expert",checked:"expert"===t.game.level,onClick:function(){return n.reset({level:"expert"})}}),r(v,{name:"Custom...",checked:"custom"===t.game.level,onClick:n.toggleCustomField}),r(h,null),r(v,{name:"Marks (?)",checked:t.marks,onClick:n.toggleMarks}),r(h,null),r(v,{name:"Best Times...",onClick:n.toggleBestTime})))},y=n(3),k=n.n(y),w=function(e){var t=e.value;return r("div",{class:k.a.root},("00"+Math.max(-99,Math.min(999,t))).slice(-3).split("").sort(function(e){return"-"===e?-1:0}).map(function(e){return r("svg",{class:k.a.digit,width:"13",height:"23","data-n":e},r("path",{class:k.a.t,d:"M1.5 1l3 3h4l3-3h-10z"}),r("path",{class:k.a.rt,d:"M12 1.5l-3 3v4l3 3v-10z"}),r("path",{class:k.a.rb,d:"M12 11.5l-3 3v4l3 3v-10z"}),r("path",{class:k.a.b,d:"M11.5 22l-3-3h-4l-3 3h10z"}),r("path",{class:k.a.lb,d:"M1 21.5l3-3v-4l-3-3v10z"}),r("path",{class:k.a.lt,d:"M1 1.5v10l3-3v-4l-3-3z"}),r("path",{class:k.a.m,d:"M8.5 13h-4L3 11.5 4.5 10h4l1.5 1.5L8.5 13z"}))}))},M=n(8),x=n.n(M),C=function(){return r("g",null,r("circle",{cx:"12",cy:"7",r:"1.5"}),r("circle",{cx:"7",cy:"7",r:"1.5"}),r("path",{d:"M13.779 11.1a.5.5 0 0 0-.7.1 4.455 4.455 0 0 1-7.158 0 .5.5 0 0 0-.8.6 5.455 5.455 0 0 0 8.752 0 .5.5 0 0 0-.094-.7z"}))},F=function(){return r("g",null,r("circle",{cx:"12.5",cy:"6.5",r:"1.5"}),r("circle",{cx:"6.5",cy:"6.5",r:"1.5"}),r("path",{d:"M9.5 10a2.5 2.5 0 1 0 2.5 2.5A2.5 2.5 0 0 0 9.5 10zm0 4a1.5 1.5 0 1 1 1.5-1.5A1.5 1.5 0 0 1 9.5 14z"}))},L=function(){return r("path",{d:"M12.227 12.188a5.067 5.067 0 0 1-5.454 0 .5.5 0 0 0-.546.837 5.981 5.981 0 0 0 6.546 0 .5.5 0 1 0-.546-.837zm4.627-3.042l-3-3A.5.5 0 0 0 13.5 6h-8a.5.5 0 0 0-.354.146l-3 3a.5.5 0 0 0 .708.708L5 7.707V9a1 1 0 0 0 1 1h1a2 2 0 0 0 2-2V7h1v1a2 2 0 0 0 2 2h1a1 1 0 0 0 1-1V7.707l2.146 2.147a.5.5 0 0 0 .708-.708z"})},V=function(){return r("path",{d:"M5.146 7.854a.5.5 0 0 0 .708 0l.646-.647.646.647a.5.5 0 0 0 .708-.708L7.207 6.5l.647-.646a.5.5 0 0 0-.708-.708l-.646.647-.646-.647a.5.5 0 0 0-.708.708l.647.646-.647.646a.5.5 0 0 0 0 .708zM13.207 6.5l.647-.646a.5.5 0 0 0-.708-.708l-.646.647-.646-.647a.5.5 0 0 0-.708.708l.647.646-.647.646a.5.5 0 0 0 .708.708l.646-.647.646.647a.5.5 0 0 0 .708-.708zM9.5 11a5.455 5.455 0 0 0-4.376 2.2.5.5 0 0 0 .8.6 4.455 4.455 0 0 1 7.158 0 .5.5 0 0 0 .8-.6A5.453 5.453 0 0 0 9.5 11z"})},z=function(e){var t=e.pressed,n=e.win,a=e.lose;return r(t?F:a?V:n?L:C,null)},D=function(e){var t=e.pressed,n=e.lose,a=e.win,l=e.onReset;return r("button",{class:x.a.root,type:"button",tabindex:-1,onclick:function(){return l()},oncreate:function(e){return e.focus()}},r("svg",{class:x.a.face,width:"19",height:"19"},r("circle",{cx:"9.5",cy:"9.5",r:"8.5",fill:"#ff0"}),r("path",{d:"M9.5 2A7.5 7.5 0 1 1 2 9.5 7.508 7.508 0 0 1 9.5 2m0-1A8.5 8.5 0 1 0 18 9.5 8.5 8.5 0 0 0 9.5 1z"}),r("g",{class:x.a.up},r(z,{pressed:t,lose:n,win:a})),r("g",{class:x.a.down},r(C,null))))},T=n(6),A=n.n(T),I=function(e,t,n,r){return n>=0&&r>=0&&(e-n-1)*(e-n+1)<=0&&(t-r-1)*(t-r+1)<=0},B=function(){return r("path",{fill:"#00f",d:"M4 12v-2h2V6H4V5l3-3h2v8h2v2H4z"})},H=function(){return r("path",{fill:"#007b00",d:"M2 12h10v-2H6v-.5L11 7l1-1V3l-1-1H3L2 3v2h3V4h4v1L8 6 2 9v3z"})},O=function(){return r("path",{fill:"#f00",d:"M2 10h7V8H5V6h4V4H2V2h9l1 1v3l-1 1 1 1v3l-1 1H2v-2z"})},S=function(){return r("path",{fill:"#00007b",d:"M8 12h3V8h1V6h-1V2H8v4H5l2-4H4L2 6v2h6v4z"})},j=function(){return r("path",{fill:"#7b0000",d:"M2 2h10v2H5v2h6l1 1v4l-1 1H2v-2h7V8H2V2z"})},N=function(){return r("path",{fill:"#007b7b",d:"M11 6H5V4h6V2H3L2 3v8l1 1h8l1-1V7zm-2 4H5V8h4z"})},K=function(){return r("path",{d:"M2 2h10v4l-3 6H6l3-6V4H2V2z"})},P=function(){return r("path",{fill:"#7b7b7b",d:"M12 3l-1-1H3L2 3v3l1 1-1 1v3l1 1h8l1-1V8l-1-1 1-1zm-3 7H5V8h4zm0-4H5V4h4z"})},W=function(){return r("g",{class:A.a.flag},r("path",{d:"M9 10.5V3H8v7l-4 2v1h8v-1z"}),r("path",{fill:"#f00",d:"M9 3v5H8L4 5.5 8 3z"}))},Y=function(){return r("text",{x:"50%",y:"50%",dx:".5",dy:".4em","text-anchor":"middle"},"?")},E=function(){return r("path",{fill:"#f00",d:"M13.854 1.854l-.708-.708L7.5 6.793 1.854 1.146l-.708.708L6.793 7.5l-5.647 5.646.708.708L7.5 8.207l5.646 5.647.708-.708L8.207 7.5l5.647-5.646z"})},G=function(){return r("g",null,r("path",{d:"M13.5 7h-1.55A4.445 4.445 0 0 0 11 4.705l.741-.741a.5.5 0 1 0-.707-.707l-.74.743A4.446 4.446 0 0 0 8 3.05V1.5a.5.5 0 0 0-1 0v1.55A4.452 4.452 0 0 0 4.705 4l-.741-.741a.5.5 0 0 0-.707.707L4 4.705A4.452 4.452 0 0 0 3.05 7H1.5a.5.5 0 0 0 0 1h1.55A4.446 4.446 0 0 0 4 10.294l-.741.741a.5.5 0 0 0 .354.854.5.5 0 0 0 .353-.147L4.705 11A4.445 4.445 0 0 0 7 11.95v1.55a.5.5 0 0 0 1 0v-1.55a4.452 4.452 0 0 0 2.3-.95l.74.74a.5.5 0 0 0 .707-.707L11 10.3a4.452 4.452 0 0 0 .95-2.3h1.55a.5.5 0 0 0 0-1z"}),r("circle",{cx:"6",cy:"6",r:"1",fill:"#fff"}))},_=function(e){var t=e.opened,n=e.mined,a=e.flag,l=e.mark,o=e.num,i=e.lose;if(t){if(n)return r(G,null);switch(o){case 1:return r(B,null);case 2:return r(H,null);case 3:return r(O,null);case 4:return r(S,null);case 5:return r(j,null);case 6:return r(N,null);case 7:return r(K,null);case 8:return r(P,null);default:return null}}return a?i&&!n?r("g",null,r(G,null),r(E,null)):r(W,null):i&&n?r(G,null):l?r(Y,null):null},R=function(e){var t=e.x,n=e.y,a=e.pressed,l=e.pressedX,o=e.pressedY,i=e.group,u=e.opened,s=e.mined,c=e.flag,m=e.mark,f=e.num,d=e.lose,g=e.onDown,v=e.onMove;return r("button",{type:"button",class:u||a&&!c&&l===t&&o===n||i&&!c&&I(t,n,l,o)||d&&(!c&&s||c&&!s)?A.a.pressed:A.a.root,tabindex:-1,onmousedown:function(e){g({event:e,x:t,y:n})},onmouseenter:function(){v({x:t,y:n})},onmouseleave:function(){v({x:-1,y:-1})}},r("svg",{class:u&&s?A.a.hurt:A.a.image,width:"15",height:"15"},r(_,{opened:u,mined:s,flag:c,mark:m,num:f,lose:d})))},X=function(e){var t=e.key,n=e.state,a=e.actions;return r(f,{key:t,title:"Minesweeper",onKeyDown:function(e){return(113===e.keyCode||78===e.keyCode)&&a.reset()}},r(b,{state:n,actions:a}),r("div",{class:l.a.root},r("div",{class:l.a.scoreboard},r(w,{value:n.game.flags}),r(D,{pressed:n.game.pressed,lose:n.game.lose,win:n.game.win,onReset:a.reset}),r(w,{value:n.game.time})),r("div",{class:l.a.field},n.game.field.map(function(e,t){return r("div",{class:n.game.win||n.game.lose?l.a.inactive:l.a.active},e.map(function(e,l){return r(R,{x:l,y:t,pressed:n.game.pressed,pressedX:n.game.pressedX,pressedY:n.game.pressedY,group:n.game.group,opened:e.opened,mined:e.mined,flag:e.flag,mark:e.mark,num:e.num,lose:n.game.lose,onDown:a.down,onMove:a.move})}))}))))},U=n(7),Z=n.n(U),q=n(9),J=n.n(q),Q=function(e){var t=e.key,n=e.type,a=e.name,l=e.value,o=e.maxLength,i=e.onInput,u=e.onCreate;return r("span",{class:J.a.root},r("input",{key:t,class:J.a.input,type:n,name:a,value:l,maxlength:o,oninput:i,oncreate:u}))},$=function(e){var t=e.key,n=e.state,a=e.actions;return r(f,{key:t},r("form",{class:Z.a.root,autocomplete:"off",onsubmit:a.submitBestTime},r("p",{class:Z.a.text},"You have the fastest time for ",n.level," level."),r("p",{class:Z.a.text},"Please enter your name."),r("div",{class:Z.a.input},r(Q,{type:"text",name:"winner",value:n.name,maxLength:32,onInput:function(e){return a.changeWinner({name:e.target.value})},onCreate:function(e){e.focus(),e.select()}})),r(c,null,r("span",{class:Z.a.button},"OK"))))},ee=n(4),te=n.n(ee),ne=function(e){var t=e.key,n=e.state,a=e.actions;return r(f,{key:t,title:"Fastest Mine Sweepers",onClose:a.toggleBestTime,onKeyDown:function(e){return 27===e.keyCode&&a.toggleBestTime()}},r("div",{class:te.a.root},r("table",{class:te.a.table},r("tbody",null,n.levels.map(function(e){return r("tr",null,r("td",{class:te.a.cell},e.level,":"),r("td",{class:te.a.cell},e.time," seconds"),r("td",{class:te.a.cell},e.name))}))),r("div",{class:te.a.footer},r(c,{type:"button",onClick:a.resetBestTime},r("span",{class:te.a.button},"Reset Scores")),r(c,{type:"button",onClick:a.toggleBestTime,onCreate:function(e){return e.focus()}},r("span",{class:te.a.button},"OK")))))},re=n(1),ae=n.n(re),le=function(e){var t=e.key,n=e.state,a=e.actions;return r(f,{key:t,title:"Custom Field",onClose:a.toggleCustomField,onKeyDown:function(e){return 27===e.keyCode&&a.toggleCustomField()}},r("form",{class:ae.a.root,autocomplete:"off",onsubmit:a.submitCustomField},r("div",null,r("label",{class:ae.a.row},r("span",{class:ae.a.name},"Height: "),r("span",{class:ae.a.value},r(Q,{value:n.height,maxLength:5,onInput:function(e){return a.changeCustomField({height:e.target.value})}}))),r("label",{class:ae.a.row},r("span",{class:ae.a.name},"Width: "),r("span",{class:ae.a.value},r(Q,{value:n.width,maxLength:5,onInput:function(e){return a.changeCustomField({width:e.target.value})}}))),r("label",{class:ae.a.row},r("span",{class:ae.a.name},"Mines: "),r("span",{class:ae.a.value},r(Q,{value:n.mines,maxLength:5,onInput:function(e){return a.changeCustomField({mines:e.target.value})}})))),r("div",{class:ae.a.footer},r(c,{onCreate:function(e){return e.focus()}},r("span",{class:ae.a.button},"OK")),r(c,{type:"button",onClick:a.toggleCustomField},r("span",{class:ae.a.button},"Cancel")))))},oe={beginner:{level:"beginner",width:9,height:9,mines:10},intermediate:{level:"intermediate",width:16,height:16,mines:40},expert:{level:"expert",width:30,height:16,mines:99}},ie=Object.keys(oe),ue=function(e){for(var t=e.level,n=e.width,r=e.height,a=e.mines,l=new Array(r),o=0,i=a;o<r;o++){l[o]=new Array(n);for(var u=0;u<n;u++,i--)l[o][u]={opened:!1,mined:i>0,flag:!1,mark:!1,num:0}}return{level:t,width:n,height:r,mines:a,field:l,left:n*r-a,pressed:!1,pressedX:-1,pressedY:-1,group:!1,flags:a,start:-1,time:0,raf:null,lose:!1,win:!1}},se=function(e,t,n){return n(e-1,t-1)+n(e-1,t+1)+n(e+1,t-1)+n(e+1,t+1)+n(e-1,t)+n(e+1,t)+n(e,t-1)+n(e,t+1)},ce={destroy:!1,menu:null,game:ue(oe.beginner),marks:function(){if("undefined"!=typeof localStorage){var e=localStorage.getItem("marks");if(null!=e)return Boolean(e)}return!0}(),winner:null,bestTime:null,customField:null},me={getState:function(){return function(e){return e}},destroy:function(){return{destroy:!0}},reset:function(e){return function(t){var n=t.game;return cancelAnimationFrame(n.raf),{menu:null,game:ue(e&&oe[e.level]||e||n)}}},down:function(e){var t=e.event,n=e.x,r=e.y;return function(e,a){var l=e.game,o=e.marks;if(t.button>2||l.win||l.lose)return null;window.addEventListener("mouseup",function e(){window.removeEventListener("mouseup",e),a.up()});var i=l.field,u=l.flags;if(!l.pressed&&2===t.button&&!i[r][n].opened){(i=i.slice())[r]=i[r].slice();var s=i[r][n],c=Object.assign({},s,{flag:o?!s.mark&&!s.flag:!s.flag,mark:o&&s.flag});i[r][n]=c,u=s.flag===c.flag?l.flags:l.flags+(c.flag?-1:1)}return{game:Object.assign({},l,{field:i,pressed:2!==t.button,pressedX:n,pressedY:r,group:t.shiftKey||t.buttons>2,flags:u})}}},move:function(e){var t=e.x,n=e.y;return function(e){var r=e.game;return{game:Object.assign({},r,{pressedX:t,pressedY:n})}}},up:function(){return function(e,t){var n=e.game,r=n.width,a=n.height,l=n.pressedX,o=n.pressedY;if(n.win||n.lose||l<0||o<0)return n.pressed||n.group?{game:Object.assign({},n,{pressed:!1,group:!1})}:null;var i=n.field.map(function(e){return e.map(function(e){return Object.assign({},e)})}),u=function(e,t){return e<0||t<0||e>=r||t>=a},s=function(e,t,n){for(var r=0,a=-1;a<=1;a++)for(var l=-1;l<=1;l++)u(a+e,l+t)||(r+=n(i[l+t][a+e])?1:0);return r},c=n.left,m=n.lose,f=function e(t,n){if(u(t,n))return 0;var r=i[n][t];return r.opened||r.flag?0:(r.opened=!0,r.num=s(t,n,function(e){return e.mined}),r.mined&&(m=!0),r.num?1:se(t,n,e)+1)},d=n.start<0;if(d){for(var g=a*r-2;g>0;g--){var v=Math.floor(Math.random()*(g+1)),p=i[Math.floor(g/r)][g%r],h=i[Math.floor(v/r)][v%r],b=p.mined;p.mined=h.mined,h.mined=b}var y=i[a-1][r-1],k=i[o][l],w=y.mined;y.mined=k.mined,k.mined=w,n.raf=requestAnimationFrame(t.tick)}var M=i[o][l];n.group?M.opened&&s(l,o,function(e){return e.flag})===M.num&&(c-=se(l,o,f)):n.pressed&&(c-=f(l,o));var x=c<=0;return(x||m)&&(x&&!m&&t.win(),cancelAnimationFrame(n.raf)),{game:Object.assign({},n,{left:c,field:i,pressed:!1,group:!1,start:d?performance.now():n.start,time:d?1:n.time,lose:m,win:x})}}},tick:function(e){return function(t,n){var r=t.game;r.raf=requestAnimationFrame(n.tick);var a=Math.floor((e-r.start)/1e3)+1;return r.time===a?null:{game:Object.assign({},r,{time:a})}}},win:function(){return function(e){var t=e.game;if("custom"===t.level)return null;var n=parseInt(localStorage.getItem(t.level),10);return n&&n<=t.time?null:{winner:{name:"Anonymous",time:t.time,level:t.level}}}},changeWinner:function(e){return function(t){var n=t.winner;return{winner:Object.assign({},n,e)}}},submitBestTime:function(e){return function(t,n){var r=t.winner;return e.preventDefault(),localStorage.setItem(r.level,r.time),localStorage.setItem(r.level+"Name",r.name.trim()),n.toggleBestTime(),{winner:null}}},toggleBestTime:function(){return function(e){return{menu:null,bestTime:e.bestTime?null:{levels:ie.map(function(e){return{level:e,name:localStorage.getItem(e+"Name")||"Anonymous",time:Math.min(999,parseInt(localStorage.getItem(e),10)||0)||999}})}}}},resetBestTime:function(){return{bestTime:{levels:ie.map(function(e){return{level:e,name:localStorage.removeItem(e+"Name")||"Anonymous",time:localStorage.removeItem(e)||999}})}}},toggleCustomField:function(){return function(e){var t=e.game;return{menu:null,customField:e.customField?null:{width:String(t.width),height:String(t.height),mines:String(t.mines)}}}},changeCustomField:function(e){return function(t){var n=t.customField;return{customField:Object.assign({},n,e)}}},submitCustomField:function(e){return function(t,n){var r=t.game,a=t.customField;e.preventDefault();var l=Math.max(9,Math.min(40,parseInt(a.width,10)||r.width)),o=Math.max(9,Math.min(30,parseInt(a.height,10)||r.height)),i=parseInt(a.mines,10)||r.mines;return n.reset({level:"custom",width:l,height:o,mines:Math.max(10,Math.min(Math.floor(l*o*.8),i))}),{customField:null}}},toggleMarks:function(){return function(e){var t=!e.marks;return localStorage.setItem("marks",t?"yes":""),{menu:null,marks:t}}},toggleMenu:function(e){return function(t){var n,r,a=t.menu,l=e.currentTarget.dataset.name;return"click"===e.type?{menu:a&&a[l]?null:(n={},n[l]=!0,n)}:"mouseenter"===e.type?a?{menu:(r={},r[l]=!0,r)}:null:"focusout"!==e.type||e.currentTarget.contains(e.relatedTarget)?null:{menu:null}}}};window.app=function(e,t,n,r){var a,l=[].map,o=r&&r.children[0]||null,i=o&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:l.call(t.childNodes,function(t){return 3===t.nodeType?t.nodeValue:e(t)})}}(o),u=[],s=!0,c=v(e),m=function e(t,n,r){for(var a in r)"function"==typeof r[a]?function(e,a){r[e]=function(e){var l=a(e);return"function"==typeof l&&(l=l(h(t,c),r)),l&&l!==(n=h(t,c))&&!l.then&&g(c=p(t,v(n,l),c)),l}}(a,r[a]):e(t.concat(a),n[a]=v(n[a]),r[a]=v(r[a]));return r}([],c,v(t));return g(),m;function f(e){return"function"==typeof e?f(e(c,m)):null!=e?e:""}function d(){a=!a;var e=f(n);for(r&&!a&&(o=function e(t,n,r,a,l){if(a===r);else if(null==r||r.nodeName!==a.nodeName){var o=function e(t,n){var r="string"==typeof t||"number"==typeof t?document.createTextNode(t):(n=n||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName),a=t.attributes;if(a){a.oncreate&&u.push(function(){a.oncreate(r)});for(var l=0;l<t.children.length;l++)r.appendChild(e(t.children[l]=f(t.children[l]),n));for(var o in a)k(r,o,a[o],null,n)}return r}(a,l);t.insertBefore(o,n),null!=r&&w(t,n,r),n=o}else if(null==r.nodeName)n.nodeValue=a;else{!function(e,t,n,r){for(var a in v(t,n))n[a]!==("value"===a||"checked"===a?e[a]:t[a])&&k(e,a,n[a],t[a],r);var l=s?n.oncreate:n.onupdate;l&&u.push(function(){l(e,t)})}(n,r.attributes,a.attributes,l=l||"svg"===a.nodeName);for(var i={},c={},m=[],d=r.children,g=a.children,p=0;p<d.length;p++){m[p]=n.childNodes[p];var h=b(d[p]);null!=h&&(i[h]=[m[p],d[p]])}for(var p=0,y=0;y<g.length;){var h=b(d[p]),M=b(g[y]=f(g[y]));if(c[h])p++;else if(null==M||M!==b(d[p+1]))if(null==M||s)null==h&&(e(n,m[p],d[p],g[y],l),y++),p++;else{var x=i[M]||[];h===M?(e(n,x[0],x[1],g[y],l),p++):x[0]?e(n,n.insertBefore(x[0],m[p]),x[1],g[y],l):e(n,m[p],null,g[y],l),c[M]=g[y],y++}else null==h&&w(n,m[p],d[p]),p++}for(;p<d.length;)null==b(d[p])&&w(n,m[p],d[p]),p++;for(var p in i)c[p]||w(n,i[p][0],i[p][1])}return n}(r,o,i,i=e)),s=!1;u.length;)u.pop()()}function g(){a||(a=!0,setTimeout(d))}function v(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function p(e,t,n){var r={};return e.length?(r[e[0]]=e.length>1?p(e.slice(1),t,n[e[0]]):t,v(n,r)):t}function h(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function b(e){return e?e.key:null}function y(e){return e.currentTarget.events[e.type](e)}function k(e,t,n,r,a){if("key"===t);else if("style"===t)if("string"==typeof n)e.style.cssText=n;else for(var l in"string"==typeof r&&(r=e.style.cssText=""),v(r,n)){var o=null==n||null==n[l]?"":n[l];"-"===l[0]?e.style.setProperty(l,o):e.style[l]=o}else"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?r||(r=e.events[t]):e.events={},e.events[t]=n,n?r||e.addEventListener(t,y):e.removeEventListener(t,y)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!a?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),null!=n&&!1!==n||e.removeAttribute(t)}function w(e,t,n){function r(){e.removeChild(function e(t,n){var r=n.attributes;if(r){for(var a=0;a<n.children.length;a++)e(t.childNodes[a],n.children[a]);r.ondestroy&&r.ondestroy(t)}return t}(t,n))}var a=n.attributes&&n.attributes.onremove;a?a(t,r):r()}}(ce,me,function(e,t){return e.destroy?null:r("main",null,e.game&&r(X,{key:"a",state:e,actions:t}),e.winner&&r($,{key:"b",state:e.winner,actions:t}),e.bestTime&&r(ne,{key:"c",state:e.bestTime,actions:t}),e.customField&&r(le,{key:"d",state:e.customField,actions:t}))},document.getElementById("app"))}]);
//# sourceMappingURL=app.15efc3ba.js.map